# 区块链上密码学安全的随机数生成方案

在以太坊上产生密码学安全的随机数是一件十分有挑战的任务，目前没有成熟的解决方案。[randao](http://randao.org/whitepaper/Randao_v0.85_en.pdf)提出了两种方法。

1. commit reveal 方案

在以太坊上部署智能合约 `C`， 每个参与者在本地生成随机数 `r`，并计算 `sha3(r)`, 将该哈希值发送到智能合约，智能合约收集无重复的哈希值到某个数量，若参与者的 `sha3(r)`被选中，则发送相应的 `r` 值到智能合约。智能合约根据收集到这些值构造出随机数。 算法的详细情况可以参考白皮书。

此方法生成的随机数是否真的随机，有以下几点疑虑：

- 参与者自己生成的随机数质量如何？
- 参与者不能重复使用已经被使用过的随机数，这还能叫随机吗？
- 参与者生成的随机数会不会有明显的统计规律？
- 参与者会不会被少数人垄断，如何做到去中心化？

2. BLS方案

该方法利用多轮数字签名构造随机数。算法大概流程是： 将参与者分成多个组，第一个组利用组私钥签名，以这个签名 `sig1` 作为随机数, 将这个随机数发送给第二个组，第二个组利用组私钥签名这个随机数得到一个新的随机数，然后在将这个随机数传递到下一个组，以此类推，知道所有的组的完成签名，最终的这个签名数值就是我们希望得到的随机数。